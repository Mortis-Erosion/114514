<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>智能聊天系统</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- 主题切换按钮 -->
  <div class="theme-switcher">
    <button id="defaultTheme" class="theme-btn active" title="默认主题"><i class="fas fa-sun"></i></button>
    <button id="darkTheme" class="theme-btn" title="暗色主题"><i class="fas fa-moon"></i></button>
    <button id="eyeTheme" class="theme-btn" title="护眼主题"><i class="fas fa-leaf"></i></button>
  </div>

  <div class="container" id="accountSystem">
    <div class="header">
      <h1>智能聊天系统</h1>
      <p>安全账号与智能对话</p>
    </div>
    
    <div class="card">
      <div class="tabs">
        <div class="tab active" id="loginTab">账号登录</div>
        <div class="tab" id="registerTab">账号注册</div>
      </div>
      
      <!-- 注册表单 -->
      <div id="registerForm" style="display: none;">
        <div class="info-box">
          <i class="fas fa-info-circle"></i>
          <div>请输入您的邮箱地址作为账号，并设置8位以上安全密码</div>
        </div>
        
        <div class="form-group">
          <label for="registerAccount">邮箱地址</label>
          <div class="input-with-icon">
            <i class="fas fa-envelope"></i>
            <input type="email" id="registerAccount" class="form-control" placeholder="请输入您的邮箱地址" required>
          </div>
        </div>
        
        <div class="form-group">
          <label for="password">设置登录密码</label>
          <div class="input-with-icon">
            <i class="fas fa-lock"></i>
            <input type="password" id="password" class="form-control" placeholder="至少8位字符，包含字母和数字">
          </div>
          <div class="password-strength">
            <div class="strength-meter" id="strengthMeter"></div>
          </div>
          <div class="strength-labels">
            <span class="strength-weak">弱</span>
            <span class="strength-medium">中</span>
            <span class="strength-strong">强</span>
          </div>
        </div>
        
        <div class="form-group">
          <label for="confirmPassword">确认密码</label>
          <div class="input-with-icon">
            <i class="fas fa-lock"></i>
            <input type="password" id="confirmPassword" class="form-control" placeholder="再次输入密码">
          </div>
        </div>
        
        <button id="registerBtn" class="submit-btn">注册账号</button>
      </div>
      
      <!-- 登录表单 -->
      <div id="loginForm">
        <div class="form-group">
          <label for="loginAccount">邮箱地址</label>
          <div class="input-with-icon">
            <i class="fas fa-envelope"></i>
            <input type="email" id="loginAccount" class="form-control" placeholder="输入您的邮箱地址" required>
          </div>
        </div>
        
        <div class="form-group">
          <label for="loginPassword">登录密码</label>
          <div class="input-with-icon">
            <i class="fas fa-lock"></i>
            <input type="password" id="loginPassword" class="form-control" placeholder="输入您的密码">
          </div>
        </div>
        
        <div class="form-group" style="text-align: right;">
          <a href="#" style="color: #2575fc; text-decoration: none;">忘记密码?</a>
        </div>
        
        <button id="loginBtn" class="submit-btn">登录账号</button>
      </div>
    </div>
    
    <div class="footer">
      <p>© 2025 智能聊天系统 | <a href="#">隐私政策</a> | <a href="#">用户协议</a></p>
    </div>
  </div>

  <!-- 聊天页面 -->
  <div id="chatPage">
    <div class="card">
      <div class="header">
        <h1>智能聊天助手</h1>
        <div class="chat-controls">
          <button id="historyBtn" title="历史记录">
            <i class="fas fa-history"></i>
          </button>
          <button id="userInfoBtn" title="账号信息">
            <i class="fas fa-user-circle"></i>
          </button>
          <button id="logoutBtn" title="退出登录">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </div>
      
      <div id="app">
        <div id="chat">
          <div class="message bot">
            <img src="https://i.ibb.co/sdFXFR26/favicon-2.jpg" alt="机器人头像" class="avatar">
            <div class="message-content">
              您好！我是您的智能助手，请问有什么可以帮助您的吗？
            </div>
          </div>
        </div>
        <div class="loader" id="loader">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="input-container">
          <textarea id="input" placeholder="请输入您的问题..."></textarea>
          <button id="pauseBtn" title="暂停响应"></button>
          <button id="sendBtn" title="发送"></button>
        </div>
      </div>
    </div>
  </div>

  <!-- 历史记录模态框 -->
  <div id="historyModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>对话历史</h2>
      <div id="historyList">
        <div class="history-item">
          <div class="history-time">2025-10-20 14:30</div>
          <div class="history-question">问: 什么是人工智能？</div>
          <div class="history-answer">答: 人工智能是计算机科学的一个分支，旨在创造能够模拟人类智能行为的机器。</div>
        </div>
        <div class="history-item">
          <div class="history-time">2025-10-19 09:15</div>
          <div class="history-question">问: 如何学习编程？</div>
          <div class="history-answer">答: 学习编程可以从基础语言如Python开始，逐步学习数据结构、算法和项目实践。</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 用户信息模态框 -->
  <div id="userInfoModal" class="modal">
    <div class="modal-content">
      <span class="close-btn close-user-info">&times;</span>
      <div class="user-info-header">
        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="用户头像" class="user-avatar">
        <div class="user-details">
          <div class="user-name">张先生</div>
          <div class="user-account" id="userAccountDisplay">12345678901</div>
        </div>
      </div>
      
      <div class="info-grid">
        <div class="info-card">
          <i class="fas fa-comments"></i>
          <div class="info-title">对话总数</div>
          <div class="info-value">128</div>
        </div>
        
        <div class="info-card">
          <i class="fas fa-clock"></i>
          <div class="info-title">活跃天数</div>
          <div class="info-value">42</div>
        </div>
      </div>
      
      <div class="user-stats">
        <h3>账号信息</h3>
        <div class="stat-item">
          <span class="stat-label">注册日期</span>
          <span class="stat-value">2025-08-15</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">最后登录</span>
          <span class="stat-value">2025-10-20</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">账号状态</span>
          <span class="stat-value" style="color: #4CAF50;">正常</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">安全等级</span>
          <span class="stat-value">高</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Supabase CDN - 暂时移除以测试基础功能 -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> -->
  <!-- 仅加载主入口模块 -->
  <script type="module" src="app.js"></script>
</body>
</html>