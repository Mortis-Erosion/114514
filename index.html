<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>智能聊天系统</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: background-color 0.3s, color 0.3s;
    }
    
    body {
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      min-height: 100vh;
      padding: 20px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .container {
      width: 100%;
      max-width: 500px;
      animation: fadeIn 0.8s ease-out;
      margin: 0 auto;
    }
    
    /* 账号系统样式 */
    .header {
      text-align: center;
      margin-bottom: 30px;
      color: white;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    
    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    .card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      overflow: hidden;
      padding: 35px;
    }
    
    .tabs {
      display: flex;
      margin-bottom: 25px;
      border-bottom: 2px solid #e1e5eb;
    }
    
    .tab {
      flex: 1;
      text-align: center;
      padding: 15px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      color: #777;
      position: relative;
    }
    
    .tab.active {
      color: #2575fc;
    }
    
    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 100%;
      height: 3px;
      background: #2575fc;
      border-radius: 3px;
    }
    
    .form-group {
      margin-bottom: 25px;
      position: relative;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
      font-size: 0.95rem;
    }
    
    .input-with-icon {
      position: relative;
    }
    
    .input-with-icon i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #777;
      font-size: 18px;
    }
    
    .form-control {
      width: 100%;
      padding: 15px 15px 15px 50px;
      border: 2px solid #e1e5eb;
      border-radius: 12px;
      font-size: 1rem;
      transition: all 0.3s;
      background: #f8f9ff;
    }
    
    .form-control:focus {
      border-color: #4d90fe;
      box-shadow: 0 0 0 2px rgba(77, 144, 254, 0.2);
      outline: none;
      background: white;
    }
    
    .info-box {
      background: #e8f4ff;
      border-radius: 12px;
      padding: 15px;
      margin: 15px 0;
      display: flex;
      align-items: center;
    }
    
    .info-box i {
      font-size: 24px;
      color: #4d90fe;
      margin-right: 15px;
    }
    
    .generate-btn {
      width: 100%;
      padding: 14px;
      background: #4d90fe;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .generate-btn i {
      margin-right: 10px;
    }
    
    .generate-btn:hover {
      background: #3a7de8;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(58, 125, 232, 0.3);
    }
    
    .account-display {
      text-align: center;
      font-size: 1.6rem;
      font-weight: 700;
      letter-spacing: 3px;
      color: #2c3e50;
      padding: 20px;
      background: #f0f7ff;
      border-radius: 12px;
      margin: 20px 0;
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Courier New', monospace;
      border: 2px dashed #4d90fe;
      transition: all 0.5s;
    }
    
    .account-display.generating {
      animation: pulse 1.5s infinite;
    }
    
    .password-strength {
      height: 6px;
      background: #e1e5eb;
      border-radius: 3px;
      margin-top: 10px;
      overflow: hidden;
    }
    
    .strength-meter {
      height: 100%;
      width: 0%;
      background: #e74c3c;
      border-radius: 3px;
      transition: width 0.5s;
    }
    
    .strength-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 0.8rem;
      color: #777;
    }
    
    .strength-weak { color: #e74c3c; }
    .strength-medium { color: #f39c12; }
    .strength-strong { color: #2ecc71; }
    
    .submit-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(to right, #6a11cb, #2575fc);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(37, 117, 252, 0.4);
      margin-top: 10px;
    }
    
    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(37, 117, 252, 0.5);
    }
    
    .footer {
      text-align: center;
      margin-top: 25px;
      color: rgba(255, 255, 255, 0.85);
    }
    
    .footer a {
      color: white;
      text-decoration: none;
      font-weight: 600;
    }
    
    .footer a:hover {
      text-decoration: underline;
    }
    
    /* 聊天页面样式 - 高度自适应 */
    #chatPage {
      display: none;
      position: relative;
      background: white;
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      width: 100%;
      max-width: 900px;
      height: 85vh;
      min-height: 500px;
      max-height: 800px;
      margin: 0 auto;
    }
    
    #app {
      padding: 20px;
      border-radius: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    
    #chatPage .header {
      color: #333;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(to right, #6a11cb, #2575fc);
      color: white;
      border-radius: 20px 20px 0 0;
    }
    
    #chatPage .header h1 {
      font-size: 1.8rem;
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .chat-controls {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    h1 {
      font-size: 1.5em;
      margin-bottom: 10px;
      text-align: center;
    }
    
    #chat {
      flex: 1;
      overflow-y: auto;
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 14px;
      background: #fafafa;
      margin-bottom: 15px;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
      min-height: 300px;
    }
    
    .message {
      margin-bottom: 15px;
      display: flex;
      align-items: flex-start;
      max-width: 90%;
    }
    
    .user {
      justify-content: flex-end;
      margin-left: auto;
    }
    
    .bot {
      justify-content: flex-start;
      margin-right: auto;
    }
    
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
    }
    
    .message-content {
      max-width: 80%;
      padding: 12px 16px;
      border-radius: 18px;
      line-height: 1.5;
      box-shadow: 0 2px 5px rgba(0,0,0,0.08);
      word-wrap: break-word;
    }
    
    .user { order: 2; }
    
    .user .message-content {
      background-color: #007bff;
      color: white;
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      border-bottom-left-radius: 18px;
      border-bottom-right-radius: 4px;
      order: 1;
    }
    
    .user .avatar {
      order: 2;
      margin-left: 10px;
      margin-right: 0;
    }
    
    .bot .message-content {
      background-color: #e9e9eb;
      color: #333;
      border-top-right-radius: 4px;
      border-top-left-radius: 18px;
      border-bottom-left-radius: 18px;
      border-bottom-right-radius: 18px;
    }
    
    textarea {
      width: 100%;
      height: 100px;
      resize: none;
      padding: 15px 60px 15px 15px;
      font-size: 1em;
      border-radius: 14px;
      border: 2px solid #e1e5eb;
      box-sizing: border-box;
      transition: border-color 0.3s;
    }
    
    textarea:focus {
      outline: none;
      border-color: #2575fc;
      box-shadow: 0 0 0 2px rgba(37, 117, 252, 0.2);
    }
    
    .input-container {
      position: relative;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 8px;
    }
    
    #sendBtn {
      position: absolute;
      bottom: 15px;
      right: 15px;
      width: 40px;
      height: 40px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    
    #sendBtn::before {
      content: '↑';
    }
    
    #pauseBtn {
      position: absolute;
      bottom: 15px;
      right: 65px;
      width: 40px;
      height: 40px;
      background-color: #6c757d;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }
    
    #pauseBtn::before {
      content: '❚❚';
    }
    
    #historyBtn, #userInfoBtn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    
    #historyBtn {
      background-color: #007bff;
    }
    
    #userInfoBtn {
      background-color: #4CAF50;
    }
    
    #logoutBtn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #e74c3c;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    
    /* 模态框样式 */
    .modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
    }
    
    .modal-content {
      background-color: #fefefe;
      margin: 10% auto;
      padding: 25px;
      border-radius: 14px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    
    .close-btn {
      color: #aaa;
      position: absolute;
      right: 20px;
      top: 20px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    
    .close-btn:hover {
      color: black;
    }
    
    .history-item {
      padding: 15px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      border-radius: 8px;
      transition: background 0.2s;
    }
    
    .history-item:hover {
      background-color: #f0f7ff;
    }
    
    .history-question {
      font-weight: bold;
      color: #007bff;
      margin-bottom: 5px;
    }
    
    .history-answer {
      color: #555;
      font-size: 0.95rem;
    }
    
    .history-time {
      font-size: 0.8rem;
      color: #777;
      text-align: right;
      margin-top: 5px;
    }
    
    /* 用户信息模态框样式 */
    #userInfoModal .modal-content {
      max-width: 450px;
    }
    
    .user-info-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    
    .user-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 20px;
      border: 3px solid #2575fc;
    }
    
    .user-details {
      flex: 1;
    }
    
    .user-name {
      font-size: 1.8rem;
      margin-bottom: 5px;
      color: #333;
    }
    
    .user-account {
      font-size: 1.2rem;
      color: #666;
      font-family: 'Courier New', monospace;
      letter-spacing: 2px;
    }
    
    .info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 20px;
    }
    
    .info-card {
      background: #f5f9ff;
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .info-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .info-card i {
      font-size: 2rem;
      color: #2575fc;
      margin-bottom: 10px;
    }
    
    .info-title {
      font-size: 0.9rem;
      color: #777;
      margin-bottom: 5px;
    }
    
    .info-value {
      font-size: 1.4rem;
      font-weight: bold;
      color: #333;
    }
    
    .user-stats {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    
    .stat-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .stat-label {
      color: #666;
    }
    
    .stat-value {
      font-weight: 600;
    }
    
    /* 主题切换按钮 */
    .theme-switcher {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      gap: 10px;
      z-index: 100;
    }
    
    .theme-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: transform 0.3s;
    }
    
    .theme-btn:hover {
      transform: scale(1.1);
    }
    
    .theme-btn.active {
      transform: scale(1.15);
      box-shadow: 0 0 0 3px rgba(255,255,255,0.5);
    }
    
    #defaultTheme {
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      color: white;
    }
    
    #darkTheme {
      background: #2c3e50;
      color: white;
    }
    
    #eyeTheme {
      background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
      color: white;
    }
    
    /* 主题样式 */
    body.dark-theme {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }
    
    body.dark-theme .card {
      background: rgba(30, 30, 46, 0.95);
      color: #e0e0e0;
    }
    
    body.dark-theme .form-group label {
      color: #e0e0e0;
    }
    
    body.dark-theme .form-control {
      background: rgba(40, 40, 60, 0.8);
      border-color: #444;
      color: #e0e0e0;
    }
    
    body.dark-theme .form-control:focus {
      border-color: #4d90fe;
      background: rgba(50, 50, 70, 0.9);
    }
    
    body.dark-theme .info-box {
      background: rgba(30, 50, 70, 0.8);
    }
    
    body.dark-theme .account-display {
      background: rgba(40, 40, 60, 0.8);
      color: #e0e0e0;
      border-color: #4d90fe;
    }
    
    body.dark-theme .password-strength {
      background: #444;
    }
    
    body.dark-theme .strength-labels {
      color: #aaa;
    }
    
    body.dark-theme .user .message-content {
      background-color: #007bff;
    }
    
    body.dark-theme .bot .message-content {
      background-color: #2d3748;
      color: #e0e0e0;
    }
    
    body.dark-theme #chat {
      background: #1a202c;
      border-color: #2d3748;
    }
    
    body.dark-theme textarea {
      background: #2d3748;
      border-color: #4a5568;
      color: #e0e0e0;
    }
    
    body.dark-theme textarea:focus {
      border-color: #4d90fe;
    }
    
    body.dark-theme .modal-content {
      background-color: #2d3748;
      color: #e0e0e0;
    }
    
    body.dark-theme .history-item:hover {
      background-color: #4a5568;
    }
    
    body.dark-theme .user-info-header {
      border-bottom: 1px solid #444;
    }
    
    body.dark-theme .user-name {
      color: #e0e0e0;
    }
    
    body.dark-theme .user-account {
      color: #aaa;
    }
    
    body.dark-theme .info-card {
      background: rgba(40, 40, 60, 0.8);
    }
    
    body.dark-theme .info-card i {
      color: #4d90fe;
    }
    
    body.dark-theme .info-title {
      color: #aaa;
    }
    
    body.dark-theme .info-value {
      color: #e0e0e0;
    }
    
    body.dark-theme .user-stats {
      border-top: 1px solid #444;
    }
    
    body.dark-theme .stat-item {
      border-bottom: 1px solid #333;
    }
    
    body.dark-theme .stat-label {
      color: #aaa;
    }
    
    body.eye-theme {
      background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
    }
    
    body.eye-theme .card {
      background: rgba(220, 240, 220, 0.95);
    }
    
    body.eye-theme .user .message-content {
      background-color: #4CAF50;
    }
    
    body.eye-theme .bot .message-content {
      background-color: #e8f5e9;
    }
    
    body.eye-theme #chat {
      background: #f1f8e9;
    }
    
    body.eye-theme textarea {
      background: #f1f8e9;
    }
    
    /* 动画 */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(77, 144, 254, 0.4); }
      70% { box-shadow: 0 0 0 15px rgba(77, 144, 254, 0); }
      100% { box-shadow: 0 0 0 0 rgba(77, 144, 254, 0); }
    }
    
    @keyframes digitFlip {
      0% { transform: rotateX(0deg); }
      50% { transform: rotateX(90deg); }
      100% { transform: rotateX(0deg); }
    }
    
    .slide-out {
      animation: slideOut 0.5s forwards;
    }
    
    .slide-in {
      animation: slideIn 0.5s forwards;
    }
    
    @keyframes slideOut {
      0% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(-100%); opacity: 0; }
    }
    
    @keyframes slideIn {
      0% { transform: translateX(100%); opacity: 0; }
      100% { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    /* 响应式调整 */
    @media (max-width: 480px) {
      .card {
        padding: 25px;
      }
      
      .header h1 {
        font-size: 2rem;
      }
      
      .account-display {
        font-size: 1.3rem;
        padding: 15px;
      }
      
      #app {
        padding: 15px;
      }
      
      #chatPage .header h1 {
        font-size: 1.5rem;
      }
      
      .message-content {
        max-width: 75%;
      }
      
      .theme-switcher {
        top: 10px;
        left: 10px;
      }
      
      .theme-btn {
        width: 35px;
        height: 35px;
        font-size: 16px;
      }
      
      .chat-controls {
        gap: 5px;
      }
      
      .user-info-header {
        flex-direction: column;
        text-align: center;
      }
      
      .user-avatar {
        margin-right: 0;
        margin-bottom: 15px;
      }
      
      .info-grid {
        grid-template-columns: 1fr;
      }
      
      #chatPage {
        height: 90vh;
        min-height: 400px;
      }
    }
    
    @media (max-height: 700px) {
      #chatPage {
        height: 95vh;
        max-height: none;
      }
    }
    
    .digit {
      display: inline-block;
      min-width: 20px;
      text-align: center;
      animation: digitFlip 0.4s ease-out;
    }
    
    /* 加载指示器 */
    .loader {
      display: none;
      justify-content: center;
      align-items: center;
      margin: 10px 0;
    }
    
    .loader span {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #2575fc;
      margin: 0 5px;
      animation: bounce 1s infinite;
    }
    
    .loader span:nth-child(2) {
      animation-delay: 0.2s;
    }
    
    .loader span:nth-child(3) {
      animation-delay: 0.4s;
    }
    
    /* 滚动条样式 */
    #chat::-webkit-scrollbar {
      width: 8px;
    }
    
    #chat::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }
    
    #chat::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 10px;
    }
    
    #chat::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }
  </style>
</head>
<body>
  <!-- 主题切换按钮 -->
  <div class="theme-switcher">
    <button id="defaultTheme" class="theme-btn active" title="默认主题"><i class="fas fa-sun"></i></button>
    <button id="darkTheme" class="theme-btn" title="暗色主题"><i class="fas fa-moon"></i></button>
    <button id="eyeTheme" class="theme-btn" title="护眼主题"><i class="fas fa-leaf"></i></button>
  </div>

  <div class="container" id="accountSystem">
    <div class="header">
      <h1>智能聊天系统</h1>
      <p>安全账号与智能对话</p>
    </div>
    
    <div class="card">
      <div class="tabs">
        <div class="tab active" id="registerTab">账号注册</div>
        <div class="tab" id="loginTab">账号登录</div>
      </div>
      
      <!-- 注册表单 -->
      <div id="registerForm">
        <div class="info-box">
          <i class="fas fa-info-circle"></i>
          <div>系统将为您随机分配11位数字账号，请设置8位以上安全密码</div>
        </div>
        
        <button id="generateBtn" class="generate-btn">
          <i class="fas fa-bolt"></i>
          <span>生成专属账号</span>
        </button>
        
        <div class="account-display" id="accountDisplay">
          <span>点击上方按钮生成账号</span>
        </div>
        
        <div class="form-group">
          <label for="password">设置登录密码</label>
          <div class="input-with-icon">
            <i class="fas fa-lock"></i>
            <input type="password" id="password" class="form-control" placeholder="至少8位字符，包含字母和数字">
          </div>
          <div class="password-strength">
            <div class="strength-meter" id="strengthMeter"></div>
          </div>
          <div class="strength-labels">
            <span class="strength-weak">弱</span>
            <span class="strength-medium">中</span>
            <span class="strength-strong">强</span>
          </div>
        </div>
        
        <div class="form-group">
          <label for="confirmPassword">确认密码</label>
          <div class="input-with-icon">
            <i class="fas fa-lock"></i>
            <input type="password" id="confirmPassword" class="form-control" placeholder="再次输入密码">
          </div>
        </div>
        
        <button id="registerBtn" class="submit-btn">注册账号</button>
      </div>
      
      <!-- 登录表单 -->
      <div id="loginForm" style="display: none;">
        <div class="form-group">
          <label for="loginAccount">您的账号</label>
          <div class="input-with-icon">
            <i class="fas fa-user"></i>
            <input type="text" id="loginAccount" class="form-control" placeholder="输入11位数字账号">
          </div>
        </div>
        
        <div class="form-group">
          <label for="loginPassword">登录密码</label>
          <div class="input-with-icon">
            <i class="fas fa-lock"></i>
            <input type="password" id="loginPassword" class="form-control" placeholder="输入您的密码">
          </div>
        </div>
        
        <div class="form-group" style="text-align: right;">
          <a href="#" style="color: #2575fc; text-decoration: none;">忘记密码?</a>
        </div>
        
        <button id="loginBtn" class="submit-btn">登录账号</button>
      </div>
    </div>
    
    <div class="footer">
      <p>© 2023 智能聊天系统 | <a href="#">隐私政策</a> | <a href="#">用户协议</a></p>
    </div>
  </div>

  <!-- 聊天页面 -->
  <div id="chatPage">
    <div class="card">
      <div class="header">
        <h1>智能聊天助手</h1>
        <div class="chat-controls">
          <button id="historyBtn" title="历史记录">
            <i class="fas fa-history"></i>
          </button>
          <button id="userInfoBtn" title="账号信息">
            <i class="fas fa-user-circle"></i>
          </button>
          <button id="logoutBtn" title="退出登录">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </div>
      
      <div id="app">
        <div id="chat">
          <div class="message bot">
            <img src="https://i.ibb.co/sdFXFR26/favicon-2.jpg" alt="机器人头像" class="avatar">
            <div class="message-content">
              您好！我是您的智能助手，请问有什么可以帮助您的吗？
            </div>
          </div>
        </div>
        <div class="loader" id="loader">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="input-container">
          <textarea id="input" placeholder="请输入您的问题..."></textarea>
          <button id="pauseBtn" title="暂停响应"></button>
          <button id="sendBtn" title="发送"></button>
        </div>
      </div>
    </div>
  </div>

  <!-- 历史记录模态框 -->
  <div id="historyModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h2>对话历史</h2>
      <div id="historyList">
        <div class="history-item">
          <div class="history-time">2023-10-20 14:30</div>
          <div class="history-question">问: 什么是人工智能？</div>
          <div class="history-answer">答: 人工智能是计算机科学的一个分支，旨在创造能够模拟人类智能行为的机器。</div>
        </div>
        <div class="history-item">
          <div class="history-time">2023-10-19 09:15</div>
          <div class="history-question">问: 如何学习编程？</div>
          <div class="history-answer">答: 学习编程可以从基础语言如Python开始，逐步学习数据结构、算法和项目实践。</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 用户信息模态框 -->
  <div id="userInfoModal" class="modal">
    <div class="modal-content">
      <span class="close-btn close-user-info">&times;</span>
      <div class="user-info-header">
        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="用户头像" class="user-avatar">
        <div class="user-details">
          <div class="user-name">张先生</div>
          <div class="user-account" id="userAccountDisplay">12345678901</div>
        </div>
      </div>
      
      <div class="info-grid">
        <div class="info-card">
          <i class="fas fa-comments"></i>
          <div class="info-title">对话总数</div>
          <div class="info-value">128</div>
        </div>
        
        <div class="info-card">
          <i class="fas fa-clock"></i>
          <div class="info-title">活跃天数</div>
          <div class="info-value">42</div>
        </div>
      </div>
      
      <div class="user-stats">
        <h3>账号信息</h3>
        <div class="stat-item">
          <span class="stat-label">注册日期</span>
          <span class="stat-value">2023-08-15</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">最后登录</span>
          <span class="stat-value">2023-10-20</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">账号状态</span>
          <span class="stat-value" style="color: #4CAF50;">正常</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">安全等级</span>
          <span class="stat-value">高</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 账号系统相关变量
      const registerTab = document.getElementById('registerTab');
      const loginTab = document.getElementById('loginTab');
      const registerForm = document.getElementById('registerForm');
      const loginForm = document.getElementById('loginForm');
      const generateBtn = document.getElementById('generateBtn');
      const accountDisplay = document.getElementById('accountDisplay');
      const passwordInput = document.getElementById('password');
      const strengthMeter = document.getElementById('strengthMeter');
      const registerBtn = document.getElementById('registerBtn');
      const loginBtn = document.getElementById('loginBtn');
      const loginAccountInput = document.getElementById('loginAccount');
      const loginPasswordInput = document.getElementById('loginPassword');
      
      // 聊天系统相关变量
      const accountSystem = document.getElementById('accountSystem');
      const chatPage = document.getElementById('chatPage');
      const chat = document.getElementById('chat');
      const input = document.getElementById('input');
      const sendBtn = document.getElementById('sendBtn');
      const historyBtn = document.getElementById('historyBtn');
      const historyModal = document.getElementById('historyModal');
      const closeBtn = document.querySelector('.close-btn');
      const historyList = document.getElementById('historyList');
      const logoutBtn = document.getElementById('logoutBtn');
      const loader = document.getElementById('loader');
      const pauseBtn = document.getElementById('pauseBtn');
      const userInfoBtn = document.getElementById('userInfoBtn');
      const userInfoModal = document.getElementById('userInfoModal');
      const closeUserInfoBtn = document.querySelector('.close-user-info');
      const userAccountDisplay = document.getElementById('userAccountDisplay');
      
      // 主题切换按钮
      const defaultThemeBtn = document.getElementById('defaultTheme');
      const darkThemeBtn = document.getElementById('darkTheme');
      const eyeThemeBtn = document.getElementById('eyeTheme');
      
      // 聊天相关配置
      const USER_AVATAR = "https://i.ibb.co/Gfkc7dM0/favicon-1.jpg";
      const BOT_AVATAR = "https://i.ibb.co/sdFXFR26/favicon-2.jpg";
      
      // 状态变量
      let chatHistory = [];
      let currentUserAccount = null;
      let isLoading = false;
      let pauseResponse = false;
      let userData = {
        name: "张先生",
        account: "",
        regDate: "2023-08-15",
        lastLogin: "2023-10-20",
        status: "正常",
        securityLevel: "高",
        conversations: 128,
        activeDays: 42
      };
      
      // 切换注册/登录表单
      registerTab.addEventListener('click', function() {
        registerTab.classList.add('active');
        loginTab.classList.remove('active');
        registerForm.style.display = 'block';
        loginForm.style.display = 'none';
      });
      
      loginTab.addEventListener('click', function() {
        loginTab.classList.add('active');
        registerTab.classList.remove('active');
        loginForm.style.display = 'block';
        registerForm.style.display = 'none';
      });
      
      // 生成随机账号
      generateBtn.addEventListener('click', function() {
        accountDisplay.innerHTML = '';
        accountDisplay.classList.add('generating');
        
        // 模拟生成过程
        setTimeout(() => {
          let account = '';
          for (let i = 0; i < 11; i++) {
            account += Math.floor(Math.random() * 10);
          }
          
          // 显示账号
          accountDisplay.textContent = account;
          accountDisplay.classList.remove('generating');
          
          // 存储生成的账号
          accountDisplay.dataset.account = account;
          
          // 显示成功消息
          setTimeout(() => {
            const successMsg = document.createElement('div');
            successMsg.style.marginTop = '10px';
            successMsg.style.color = '#2ecc71';
            successMsg.style.fontSize = '0.9rem';
            successMsg.innerHTML = '<i class="fas fa-check-circle"></i> 账号已生成，请设置密码';
            accountDisplay.appendChild(successMsg);
          }, 500);
        }, 800);
      });
      
      // 密码强度检测
      passwordInput.addEventListener('input', function() {
        const password = this.value;
        let strength = 0;
        
        // 长度检测
        if (password.length >= 8) strength += 25;
        if (password.length >= 12) strength += 15;
        
        // 包含数字
        if (/\d/.test(password)) strength += 20;
        
        // 包含小写字母
        if (/[a-z]/.test(password)) strength += 15;
        
        // 包含大写字母
        if (/[A-Z]/.test(password)) strength += 15;
        
        // 包含特殊字符
        if (/[^A-Za-z0-9]/.test(password)) strength += 20;
        
        // 更新强度条
        strengthMeter.style.width = Math.min(strength, 100) + '%';
        
        // 更新颜色
        if (strength < 40) {
          strengthMeter.style.background = '#e74c3c';
        } else if (strength < 70) {
          strengthMeter.style.background = '#f39c12';
        } else {
          strengthMeter.style.background = '#2ecc71';
        }
      });
      
      // 注册功能
      registerBtn.addEventListener('click', function() {
        const account = accountDisplay.dataset.account;
        const password = passwordInput.value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        if (!account) {
          alert('请先生成账号');
          return;
        }
        
        if (password.length < 8) {
          alert('密码长度至少为8位');
          return;
        }
        
        if (password !== confirmPassword) {
          alert('两次输入的密码不一致');
          return;
        }
        
        // 简单密码强度检查
        const hasNumber = /\d/.test(password);
        const hasLetter = /[a-zA-Z]/.test(password);
        
        if (!hasNumber || !hasLetter) {
          alert('密码需同时包含字母和数字');
          return;
        }
        
        // 模拟注册成功
        registerBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 注册中...';
        
        setTimeout(() => {
          alert(`注册成功！\n您的账号: ${account}`);
          registerBtn.innerHTML = '注册账号';
          
          // 更新用户数据
          userData.account = account;
          
          // 自动切换到登录
          loginTab.click();
          document.getElementById('loginAccount').value = account;
          document.getElementById('password').value = '';
          document.getElementById('confirmPassword').value = '';
        }, 1000);
      });
      
      // 登录功能
      loginBtn.addEventListener('click', function() {
        const account = loginAccountInput.value;
        const password = loginPasswordInput.value;
        
        if (!/^\d{11}$/.test(account)) {
          alert('请输入有效的11位数字账号');
          return;
        }
        
        if (password.length < 8) {
          alert('密码长度至少为8位');
          return;
        }
        
        // 模拟登录
        loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 登录中...';
        
        setTimeout(() => {
          loginBtn.innerHTML = '登录账号';
          
          // 设置当前用户
          currentUserAccount = account;
          
          // 更新用户数据
          userData.account = account;
          userData.lastLogin = new Date().toISOString().split('T')[0];
          
          // 切换到聊天页面
          switchToChatPage();
        }, 1000);
      });
      
      // 切换到聊天页面
      function switchToChatPage() {
        // 更新页面内容
        document.querySelector('#chatPage .header h1').textContent = `智能聊天助手 - ${currentUserAccount}`;
        
        // 动画切换
        accountSystem.classList.add('slide-out');
        
        setTimeout(() => {
          accountSystem.style.display = 'none';
          chatPage.style.display = 'block';
          chatPage.classList.add('slide-in');
          
          // 清除输入框
          input.focus();
          
          // 添加欢迎消息
          setTimeout(() => {
            appendMessage('bot', `您好！欢迎使用智能聊天助手。我是您的AI助手，随时为您提供帮助。`);
          }, 500);
        }, 500);
      }
      
      // 登出功能
      logoutBtn.addEventListener('click', function() {
        currentUserAccount = null;
        
        // 切换到账号系统
        chatPage.classList.add('slide-out');
        
        setTimeout(() => {
          chatPage.style.display = 'none';
          accountSystem.style.display = 'block';
          accountSystem.classList.add('slide-in');
          
          // 清除登录表单
          loginAccountInput.value = '';
          loginPasswordInput.value = '';
          loginTab.click();
        }, 500);
      });
      
      // 显示用户信息
      function showUserInfo() {
        userAccountDisplay.textContent = currentUserAccount || userData.account;
        userInfoModal.style.display = 'block';
      }
      
      // 添加消息
      function appendMessage(sender, text) {
        const msgDiv = document.createElement('div');
        msgDiv.classList.add('message', sender);
      
        // 创建头像元素
        const avatarImg = document.createElement('img');
        avatarImg.classList.add('avatar');
        avatarImg.src = sender === 'user' ? USER_AVATAR : BOT_AVATAR;
        avatarImg.alt = sender === 'user' ? '你的头像' : '机器人头像';
      
        // 创建消息内容容器
        const contentDiv = document.createElement('div');
        contentDiv.classList.add('message-content');
        contentDiv.textContent = text;
      
        // 组装消息元素
        msgDiv.appendChild(avatarImg);
        msgDiv.appendChild(contentDiv);
        chat.appendChild(msgDiv);
      
        // 滚动到底部
        chat.scrollTop = chat.scrollHeight;
      }
      
      // 暂停/继续响应
      pauseBtn.addEventListener('click', function() {
        pauseResponse = !pauseResponse;
        if (pauseResponse) {
          pauseBtn.style.backgroundColor = '#ffc107';
          pauseBtn.setAttribute('title', '继续响应');
          pauseBtn.innerHTML = '<i class="fas fa-play"></i>';
        } else {
          pauseBtn.style.backgroundColor = '#6c757d';
          pauseBtn.setAttribute('title', '暂停响应');
          pauseBtn.innerHTML = '';
          pauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
        }
      });
      
      // 发送消息
      function sendMessage() {
        const text = input.value.trim();
        if (!text) return;
        
        appendMessage('user', text);
        input.value = '';
        sendBtn.disabled = true;
        pauseBtn.disabled = false;
        
        // 显示加载指示器
        loader.style.display = 'flex';
        isLoading = true;
        pauseResponse = false;
        pauseBtn.style.backgroundColor = '#6c757d';
        pauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
        
        // 模拟AI响应
        setTimeout(() => {
          // 隐藏加载指示器
          loader.style.display = 'none';
          sendBtn.disabled = false;
          
          // 生成AI回复
          const responses = [
            "我理解您的疑问。人工智能的核心在于模拟人类认知过程，通过算法处理信息并做出决策。",
            "学习编程最重要的是实践。建议您从基础项目开始，逐步增加复杂度，同时学习算法和数据结构。",
            "用户体验设计的关键在于理解用户需求。通过用户调研和原型测试，可以创建更符合用户期望的产品。",
            "网络安全涉及多个层面，包括数据加密、访问控制和入侵检测。定期更新系统和使用强密码是基础防护措施。",
            "大数据分析需要掌握数据清洗、处理和可视化技术。Python和R是常用的工具，配合SQL数据库使用效果更佳。"
          ];
          
          const randomResponse = responses[Math.floor(Math.random() * responses.length)];
          appendMessage('bot', randomResponse);
          
          // 更新对话计数
          userData.conversations++;
          
          input.focus();
          isLoading = false;
        }, 1500);
      }
      
      // 主题切换功能
      function setTheme(themeName) {
        document.body.className = themeName;
        
        // 更新按钮状态
        defaultThemeBtn.classList.remove('active');
        darkThemeBtn.classList.remove('active');
        eyeThemeBtn.classList.remove('active');
        
        if (themeName === '') {
          defaultThemeBtn.classList.add('active');
        } else {
          document.getElementById(themeName + 'Theme').classList.add('active');
        }
        
        // 保存主题偏好
        localStorage.setItem('theme', themeName);
      }
      
      // 初始化
      function init() {
        // 加载主题偏好
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
          setTheme(savedTheme);
        }
      }
      
      // 设置事件监听器
      historyBtn.addEventListener('click', () => historyModal.style.display = 'block');
      closeBtn.addEventListener('click', () => historyModal.style.display = 'none');
      closeUserInfoBtn.addEventListener('click', () => userInfoModal.style.display = 'none');
      sendBtn.addEventListener('click', sendMessage);
      userInfoBtn.addEventListener('click', showUserInfo);
      
      input.addEventListener('keydown', e => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });
      
      // 主题按钮事件
      defaultThemeBtn.addEventListener('click', () => setTheme(''));
      darkThemeBtn.addEventListener('click', () => setTheme('dark'));
      eyeThemeBtn.addEventListener('click', () => setTheme('eye'));
      
      // 点击模态框外部关闭
      window.addEventListener('click', (event) => {
        if (event.target === historyModal || event.target === userInfoModal) {
          historyModal.style.display = 'none';
          userInfoModal.style.display = 'none';
        }
      });
      
      // 启动应用
      init();
    });
  </script>
</body>
</html>